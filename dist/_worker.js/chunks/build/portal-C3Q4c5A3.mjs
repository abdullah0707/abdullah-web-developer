import{i as e,c as t}from"./focus-management-pwSlEFwO.mjs";import{a as o}from"./use-outside-click-C5-WFuny.mjs";import{f as l,u as a}from"./hidden-C_dNCCVv.mjs";import{A as u,o as s}from"./keyboard-CAJ_aYVR.mjs";import{v as i}from"./server.mjs";function E(e,o,l,a){t.isServer||i.watchEffect(t=>{(e=null!=e?e:void 0).addEventListener(o,l,a),t(()=>e.removeEventListener(o,l,a))})}var f,d=((f=d||{})[f.Forwards=0]="Forwards",f[f.Backwards=1]="Backwards",f);function n(){let e=i.ref(0);return o("keydown",t=>{"Tab"===t.key&&(e.value=t.shiftKey?1:0)}),e}function N({defaultContainers:t=[],portals:o,mainTreeNodeRef:u}={}){let f=i.ref(null),d=e(f);function u2(){var e,l,a;let u=[];for(let e of t)null!==e&&(e instanceof HTMLElement?u.push(e):"value"in e&&e.value instanceof HTMLElement&&u.push(e.value));if(null!=o&&o.value)for(let e of o.value)u.push(e);for(let t of null!=(e=null==d?void 0:d.querySelectorAll("html > *, body > *"))?e:[])t!==(void 0).body&&t!==(void 0).head&&t instanceof HTMLElement&&"headlessui-portal-root"!==t.id&&(t.contains(s(f))||t.contains(null==(a=null==(l=s(f))?void 0:l.getRootNode())?void 0:a.host)||u.some(e=>t.contains(e))||u.push(t));return u}return{resolveContainers:u2,contains:e=>u2().some(t=>t.contains(e)),mainTreeNodeRef:f,MainTreeNode:()=>null!=u?null:i.h(l,{features:a.Hidden,ref:f})}}function v(){let e=i.ref(null);return{mainTreeNodeRef:e,MainTreeNode:()=>i.h(l,{features:a.Hidden,ref:e})}}let p=Symbol("ForcePortalRootContext");let c=i.defineComponent({name:"ForcePortalRoot",props:{as:{type:[Object,String],default:"template"},force:{type:Boolean,default:!1}},setup:(e,{slots:t,attrs:o})=>(i.provide(p,e.force),()=>{let{force:l,...a}=e;return u({theirProps:a,ourProps:{},slot:{},slots:t,attrs:o,name:"ForcePortalRoot"})})});const m=new WeakMap;function M(e,t){let o=t(function(e){var t;return null!=(t=m.get(e))?t:0}(e));return o<=0?m.delete(e):m.set(e,o),o}let h=i.defineComponent({name:"Portal",props:{as:{type:[Object,String],default:"div"}},setup(t,{slots:o,attrs:l}){let a=i.ref(null);i.computed(()=>e(a));let f=i.inject(p,!1),d=i.inject(y,null),c=i.ref(!0===f||null==d?function(t){let o=e(t);if(!o){if(null===t)return null;throw new Error(`[Headless UI]: Cannot find ownerDocument for contextElement: ${t}`)}let l=o.getElementById("headlessui-portal-root");if(l)return l;let a=o.createElement("div");return a.setAttribute("id","headlessui-portal-root"),o.body.appendChild(a)}(a.value):d.resolveTarget());c.value&&M(c.value,e=>e+1);let m=i.ref(!1);i.watchEffect(()=>{f||null!=d&&(c.value=d.resolveTarget())});let h=i.inject(g,null),C=!1;return i.getCurrentInstance(),i.watch(a,()=>{if(C||!h)return;s(a)&&(C=!0)}),()=>{if(!m.value||null===c.value)return null;let e={ref:a,"data-headlessui-portal":""};return i.h(i.Teleport,{to:c.value},u({ourProps:e,theirProps:t,slot:{},attrs:l,slots:o,name:"Portal"}))}}}),g=Symbol("PortalParentContext");function q(){let e=i.inject(g,null),t=i.ref([]);function r(o){let l=t.value.indexOf(o);-1!==l&&t.value.splice(l,1),e&&e.unregister(o)}let o={register:function(o){return t.value.push(o),e&&e.register(o),()=>r(o)},unregister:r,portals:t};return[t,i.defineComponent({name:"PortalWrapper",setup:(e,{slots:t})=>(i.provide(g,o),()=>{var e;return null==(e=t.default)?void 0:e.call(t)})})]}let y=Symbol("PortalGroupContext"),C=i.defineComponent({name:"PortalGroup",props:{as:{type:[Object,String],default:"template"},target:{type:Object,default:null}},setup(e,{attrs:t,slots:o}){let l=i.reactive({resolveTarget:()=>e.target});return i.provide(y,l),()=>{let{target:l,...a}=e;return u({theirProps:a,ourProps:{},slot:{},attrs:t,slots:o,name:"PortalGroup"})}}});export{h as $,E,N,d,n,q,c as u,v,C as z};
//# sourceMappingURL=portal-C3Q4c5A3.mjs.map
