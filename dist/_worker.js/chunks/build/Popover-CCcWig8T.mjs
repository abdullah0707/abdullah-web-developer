import{x as e}from"../_/nitro.mjs";import{n as t,q as o,N as l,E as n,d as r,v as u}from"./portal-C3Q4c5A3.mjs";import{s,i,o as d,A as v,u as f,N as m,a as b}from"./keyboard-CAJ_aYVR.mjs";import{w as g}from"./use-outside-click-C5-WFuny.mjs";import{s as P}from"./use-resolve-button-type-mmKhQN3O.mjs";import{f as h,u as w}from"./hidden-C_dNCCVv.mjs";import{l as C,i as k,t as x}from"./open-closed-yxKiGq4R.mjs";import{i as E,P as $,N as O,E as T,w as B,T as j,h as N}from"./focus-management-pwSlEFwO.mjs";import{a as D,v as M,m as A,f as R,C as V,g as _}from"./server.mjs";import{u as H}from"./usePopper-CpxAqeoY.mjs";import{j as L,k as G,t as K,A as q}from"../routes/renderer.mjs";import{K as W}from"../_/shared.esm-bundler.mjs";const z={wrapper:"relative",container:"z-50 group",trigger:"inline-flex w-full",width:"",background:"bg-white dark:bg-gray-900",shadow:"shadow-lg",rounded:"rounded-md",ring:"ring-1 ring-gray-200 dark:ring-gray-800",base:"overflow-hidden focus:outline-none relative",transition:{enterActiveClass:"transition ease-out duration-200",enterFromClass:"opacity-0 translate-y-1",enterToClass:"opacity-100 translate-y-0",leaveActiveClass:"transition ease-in duration-150",leaveFromClass:"opacity-100 translate-y-0",leaveToClass:"opacity-0 translate-y-1"},overlay:{base:"fixed inset-0 transition-opacity z-50",background:"bg-gray-200/75 dark:bg-gray-800/75",transition:{enterActiveClass:"ease-out duration-200",enterFromClass:"opacity-0",enterToClass:"opacity-100",leaveActiveClass:"ease-in duration-150",leaveFromClass:"opacity-100",leaveToClass:"opacity-0"}},popper:{strategy:"fixed"},default:{openDelay:0,closeDelay:0},arrow:V};var Q,Y=((Q=Y||{})[Q.Open=0]="Open",Q[Q.Closed=1]="Closed",Q);let J=Symbol("PopoverContext");function U(e){let t=M.inject(J,null);if(null===t){let t=new Error(`<${e} /> is missing a parent <${ee.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,U),t}return t}let X=Symbol("PopoverGroupContext");function ae(){return M.inject(X,null)}let Z=Symbol("PopoverPanelContext");let ee=M.defineComponent({name:"Popover",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(e,{slots:t,attrs:r,expose:u}){var s;let i=M.ref(null);u({el:i,$el:i});let m=M.ref(1),b=M.ref(null),P=M.ref(null),h=M.ref(null),w=M.ref(null),C=M.computed(()=>E(i)),$=M.computed(()=>{var e,t;if(!d(b)||!d(w))return!1;for(let e of(void 0).querySelectorAll("body > *"))if(Number(null==e?void 0:e.contains(d(b)))^Number(null==e?void 0:e.contains(d(w))))return!0;let o=T(),l=o.indexOf(d(b)),n=(l+o.length-1)%o.length,r=(l+1)%o.length,u=o[n],s=o[r];return!(null!=(e=d(w))&&e.contains(u)||null!=(t=d(w))&&t.contains(s))}),O={popoverState:m,buttonId:M.ref(null),panelId:M.ref(null),panel:w,button:b,isPortalled:$,beforePanelSentinel:P,afterPanelSentinel:h,togglePopover(){m.value=f(m.value,{0:1,1:0})},closePopover(){1!==m.value&&(m.value=1)},close(e){O.closePopover();let t=e?e instanceof HTMLElement?e:e.value instanceof HTMLElement?d(e):d(O.button):d(O.button);null==t||t.focus()}};M.provide(J,O),x(M.computed(()=>f(m.value,{0:k.Open,1:k.Closed})));let j={buttonId:O.buttonId,panelId:O.panelId,close(){O.closePopover()}},D=ae(),A=null==D?void 0:D.registerPopover,[R,V]=o(),_=l({mainTreeNodeRef:null==D?void 0:D.mainTreeNodeRef,portals:R,defaultContainers:[b,w]});return M.watchEffect(()=>null==A?void 0:A(j)),n(null==(s=C.value)?void 0:s.defaultView,"focus",e=>{var t,o;void 0!==e.target&&e.target instanceof HTMLElement&&0===m.value&&(function(){var e,t,o,l;return null!=(l=null==D?void 0:D.isFocusWithinPopoverGroup())?l:(null==(e=C.value)?void 0:e.activeElement)&&((null==(t=d(b))?void 0:t.contains(C.value.activeElement))||(null==(o=d(w))?void 0:o.contains(C.value.activeElement)))}()||b&&w&&(_.contains(e.target)||null!=(t=d(O.beforePanelSentinel))&&t.contains(e.target)||null!=(o=d(O.afterPanelSentinel))&&o.contains(e.target)||O.closePopover()))},!0),g(_.resolveContainers,(e,t)=>{var o;O.closePopover(),B(t,N.Loose)||(e.preventDefault(),null==(o=d(b))||o.focus())},M.computed(()=>0===m.value)),()=>{let o={open:0===m.value,close:O.close};return M.h(M.Fragment,[M.h(V,{},()=>v({theirProps:{...e,...r},ourProps:{ref:i},slot:o,slots:t,attrs:r,name:"Popover"})),M.h(_.MainTreeNode)])}}}),te=M.defineComponent({name:"PopoverButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(e,{attrs:o,slots:l,expose:n}){var u;let s=null!=(u=e.id)?u:`headlessui-popover-button-${i()}`,m=U("PopoverButton"),g=M.computed(()=>E(m.button));n({el:m.button,$el:m.button});let C=ae(),k=null==C?void 0:C.closeOthers,x=M.inject(Z,null),B=M.computed(()=>null!==x&&x.value===m.panelId.value),N=M.ref(null),D=`headlessui-focus-sentinel-${i()}`;B.value||M.watchEffect(()=>{m.button.value=d(N)});let A=P(M.computed(()=>({as:e.as,type:o.type})),N);function c(e){var t,o,l,n,r;if(B.value){if(1===m.popoverState.value)return;switch(e.key){case b.Space:case b.Enter:e.preventDefault(),null==(o=(t=e.target).click)||o.call(t),m.closePopover(),null==(l=d(m.button))||l.focus()}}else switch(e.key){case b.Space:case b.Enter:e.preventDefault(),e.stopPropagation(),1===m.popoverState.value&&(null==k||k(m.buttonId.value)),m.togglePopover();break;case b.Escape:if(0!==m.popoverState.value)return null==k?void 0:k(m.buttonId.value);if(!d(m.button)||null!=(n=g.value)&&n.activeElement&&(null==(r=d(m.button))||!r.contains(g.value.activeElement)))return;e.preventDefault(),e.stopPropagation(),m.closePopover()}}function I(e){B.value||e.key===b.Space&&e.preventDefault()}function F(t){var o,l;e.disabled||(B.value?(m.closePopover(),null==(o=d(m.button))||o.focus()):(t.preventDefault(),t.stopPropagation(),1===m.popoverState.value&&(null==k||k(m.buttonId.value)),m.togglePopover(),null==(l=d(m.button))||l.focus()))}function w2(e){e.preventDefault(),e.stopPropagation()}let R=t();function p(){let e=d(m.panel);e&&f(R.value,{[r.Forwards]:()=>$(e,O.First),[r.Backwards]:()=>$(e,O.Last)})===j.Error&&$(T().filter(e=>"true"!==e.dataset.headlessuiFocusGuard),f(R.value,{[r.Forwards]:O.Next,[r.Backwards]:O.Previous}),{relativeTo:d(m.button)})}return()=>{let t=0===m.popoverState.value,n={open:t},{...r}=e,u=B.value?{ref:N,type:A.value,onKeydown:c,onClick:F}:{ref:N,id:s,type:A.value,"aria-expanded":0===m.popoverState.value,"aria-controls":d(m.panel)?m.panelId.value:void 0,disabled:!!e.disabled||void 0,onKeydown:c,onKeyup:I,onClick:F,onMousedown:w2};return M.h(M.Fragment,[v({ourProps:u,theirProps:{...o,...r},slot:n,attrs:o,slots:l,name:"PopoverButton"}),t&&!B.value&&m.isPortalled.value&&M.h(h,{id:D,features:w.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:p})])}}});M.defineComponent({name:"PopoverOverlay",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0}},setup(e,{attrs:t,slots:o}){let l=U("PopoverOverlay"),n=`headlessui-popover-overlay-${i()}`,r=C(),u=M.computed(()=>null!==r?(r.value&k.Open)===k.Open:0===l.popoverState.value);function y(){l.closePopover()}return()=>{let r={open:0===l.popoverState.value};return v({ourProps:{id:n,"aria-hidden":!0,onClick:y},theirProps:e,slot:r,attrs:t,slots:o,features:m.RenderStrategy|m.Static,visible:u.value,name:"PopoverOverlay"})}}});let oe=M.defineComponent({name:"PopoverPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},id:{type:String,default:null}},inheritAttrs:!1,setup(e,{attrs:o,slots:l,expose:n}){var u;let s=null!=(u=e.id)?u:`headlessui-popover-panel-${i()}`,{focus:g}=e,P=U("PopoverPanel"),x=M.computed(()=>E(P.panel)),B=`headlessui-focus-sentinel-before-${i()}`,N=`headlessui-focus-sentinel-after-${i()}`;n({el:P.panel,$el:P.panel}),M.provide(Z,P.panelId),M.watchEffect(()=>{var e,t;if(!g||0!==P.popoverState.value||!P.panel)return;let o=null==(e=x.value)?void 0:e.activeElement;null!=(t=d(P.panel))&&t.contains(o)||$(d(P.panel),O.First)});let D=C(),A=M.computed(()=>null!==D?(D.value&k.Open)===k.Open:0===P.popoverState.value);function a(e){var t,o;if(e.key===b.Escape){if(0!==P.popoverState.value||!d(P.panel)||x.value&&(null==(t=d(P.panel))||!t.contains(x.value.activeElement)))return;e.preventDefault(),e.stopPropagation(),P.closePopover(),null==(o=d(P.button))||o.focus()}}function S(e){var t,o,l,n,r;let u=e.relatedTarget;u&&d(P.panel)&&(null!=(t=d(P.panel))&&t.contains(u)||(P.closePopover(),(null!=(l=null==(o=d(P.beforePanelSentinel))?void 0:o.contains)&&l.call(o,u)||null!=(r=null==(n=d(P.afterPanelSentinel))?void 0:n.contains)&&r.call(n,u))&&u.focus({preventScroll:!0})))}let R=t();function I(){let e=d(P.panel);e&&f(R.value,{[r.Forwards]:()=>{var t;$(e,O.First)===j.Error&&(null==(t=d(P.afterPanelSentinel))||t.focus())},[r.Backwards]:()=>{var e;null==(e=d(P.button))||e.focus({preventScroll:!0})}})}function F(){let e=d(P.panel);e&&f(R.value,{[r.Forwards]:()=>{let e=d(P.button),t=d(P.panel);if(!e)return;let o=T(),l=o.indexOf(e),n=o.slice(0,l+1),r=[...o.slice(l+1),...n];for(let e of r.slice())if("true"===e.dataset.headlessuiFocusGuard||null!=t&&t.contains(e)){let t=r.indexOf(e);-1!==t&&r.splice(t,1)}$(r,O.First,{sorted:!1})},[r.Backwards]:()=>{var t;$(e,O.Previous)===j.Error&&(null==(t=d(P.button))||t.focus())}})}return()=>{let t={open:0===P.popoverState.value,close:P.close},{focus:n,...r}=e,u={ref:P.panel,id:s,onKeydown:a,onFocusout:g&&0===P.popoverState.value?S:void 0,tabIndex:-1};return v({ourProps:u,theirProps:{...o,...r},attrs:o,slot:t,slots:{...l,default:(...e)=>{var t;return[M.h(M.Fragment,[A.value&&P.isPortalled.value&&M.h(h,{id:B,ref:P.beforePanelSentinel,features:w.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:I}),null==(t=l.default)?void 0:t.call(l,...e),A.value&&P.isPortalled.value&&M.h(h,{id:N,ref:P.afterPanelSentinel,features:w.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:F})])]}},features:m.RenderStrategy|m.Static,visible:A.value,name:"PopoverPanel"})}}});M.defineComponent({name:"PopoverGroup",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(e,{attrs:t,slots:o,expose:l}){let n=M.ref(null),r=M.shallowRef([]),s=M.computed(()=>E(n)),i=u();function v$1(e){let t=r.value.indexOf(e);-1!==t&&r.value.splice(t,1)}return l({el:n,$el:n}),M.provide(X,{registerPopover:function(e){return r.value.push(e),()=>{v$1(e)}},unregisterPopover:v$1,isFocusWithinPopoverGroup:function(){var e;let t=s.value;if(!t)return!1;let o=t.activeElement;return!(null==(e=d(n))||!e.contains(o))||r.value.some(e=>{var l,n;return(null==(l=t.getElementById(e.buttonId.value))?void 0:l.contains(o))||(null==(n=t.getElementById(e.panelId.value))?void 0:n.contains(o))})},closeOthers:function(e){for(let t of r.value)t.buttonId.value!==e&&t.close()},mainTreeNodeRef:i.mainTreeNodeRef}),()=>M.h(M.Fragment,[v({ourProps:{ref:n},theirProps:{...e,...t},slot:{},attrs:t,slots:o,name:"PopoverGroup"}),M.h(i.MainTreeNode)])}});const le=A(_.ui.strategy,_.ui.popover,z),ne=M.defineComponent({components:{HPopover:ee,HPopoverButton:te,HPopoverPanel:oe},inheritAttrs:!1,props:{mode:{type:String,default:"click",validator:e=>["click","hover"].includes(e)},open:{type:Boolean,default:void 0},disabled:{type:Boolean,default:!1},openDelay:{type:Number,default:()=>le.default.openDelay},closeDelay:{type:Number,default:()=>le.default.closeDelay},overlay:{type:Boolean,default:!1},popper:{type:Object,default:()=>({})},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:open"],setup(t,{emit:o}){const{ui:l,attrs:n}=R("popover",M.toRef(t,"ui"),le,M.toRef(t,"class")),r=M.computed(()=>e("hover"===t.mode?{offsetDistance:0}:{},t.popper,l.value.popper)),[u,i]=H(r.value),d=M.ref(null),v=M.ref(null);let f=null,m=null;const b=M.computed(()=>{var e,o,n;if("hover"!==t.mode)return{};const u=(null==(e=t.popper)?void 0:e.offsetDistance)||(null==(o=l.value.popper)?void 0:o.offsetDistance)||8,s=null==(n=r.value.placement)?void 0:n.split("-")[0],i=`${u}px`;return"top"===s||"bottom"===s?{paddingTop:i,paddingBottom:i}:"left"===s||"right"===s?{paddingLeft:i,paddingRight:i}:{paddingTop:i,paddingBottom:i,paddingLeft:i,paddingRight:i}});return M.watch(()=>t.open,(e,t)=>{v.value&&void 0!==t&&e!==t&&(e?v.value.popoverState=0:v.value.closePopover())}),M.watch(()=>{var e;return null==(e=v.value)?void 0:e.popoverState},(e,t)=>{void 0!==t&&e!==t&&o("update:open",0===e)}),s(()=>M.useId()),{ui:l,attrs:n,popover:d,popper:r,trigger:u,container:i,containerStyle:b,onTouchStart:function(e){e.cancelable&&v.value&&"click"!==t.mode&&(0===v.value.popoverState?v.value.closePopover():v.value.togglePopover())},onMouseEnter:function(){"hover"===t.mode&&v.value&&(m&&(clearTimeout(m),m=null),0!==v.value.popoverState&&(f=f||setTimeout(()=>{v.value.togglePopover&&v.value.togglePopover(),f=null},t.openDelay)))},onMouseLeave:function(){"hover"===t.mode&&v.value&&(f&&(clearTimeout(f),f=null),1!==v.value.popoverState&&(m=m||setTimeout(()=>{v.value.closePopover&&v.value.closePopover(),m=null},t.closeDelay)))}}}});const re=ne.setup;ne.setup=(e,t)=>{const o=M.useSSRContext();return(o.modules||(o.modules=new Set)).add("node_modules/@nuxt/ui/dist/runtime/components/overlays/Popover.vue"),re?re(e,t):void 0};const ue=D(ne,[["ssrRender",function(e,t,o,l,n,r,u,s){const i=M.resolveComponent("HPopover"),d=M.resolveComponent("HPopoverButton"),v=M.resolveComponent("HPopoverPanel");t(L(i,M.mergeProps({ref:"popover",class:e.ui.wrapper},e.attrs,{onMouseleave:e.onMouseLeave},l),{default:M.withCtx(({open:t,close:o},l,n,r)=>{if(!l)return[M.createVNode(d,{ref:"trigger",as:"div",disabled:e.disabled,class:e.ui.trigger,role:"button",onMouseenter:e.onMouseEnter,onTouchstartPassive:e.onTouchStart},{default:M.withCtx(()=>[M.renderSlot(e.$slots,"default",{open:t,close:o},()=>[M.createVNode("button",{disabled:e.disabled}," Open ",8,["disabled"])])]),_:2},1032,["disabled","class","onMouseenter","onTouchstartPassive"]),e.overlay?(M.openBlock(),M.createBlock(M.Transition,M.mergeProps({key:0,appear:""},e.ui.overlay.transition),{default:M.withCtx(()=>[t?(M.openBlock(),M.createBlock("div",{key:0,class:[e.ui.overlay.base,e.ui.overlay.background]},null,2)):M.createCommentVNode("",!0)]),_:2},1040)):M.createCommentVNode("",!0),t?(M.openBlock(),M.createBlock("div",{key:1,ref:"container",class:[e.ui.container,e.ui.width],style:e.containerStyle,onMouseenter:e.onMouseEnter},[M.createVNode(M.Transition,M.mergeProps({appear:""},e.ui.transition),{default:M.withCtx(()=>[M.createVNode("div",null,[e.popper.arrow?(M.openBlock(),M.createBlock("div",{key:0,"data-popper-arrow":"",class:Object.values(e.ui.arrow)},null,2)):M.createCommentVNode("",!0),M.createVNode(v,{class:[e.ui.base,e.ui.background,e.ui.ring,e.ui.rounded,e.ui.shadow],static:""},{default:M.withCtx(()=>[M.renderSlot(e.$slots,"panel",{open:t,close:o})]),_:2},1032,["class"])])]),_:2},1040)],46,["onMouseenter"])):M.createCommentVNode("",!0)];l(L(d,{ref:"trigger",as:"div",disabled:e.disabled,class:e.ui.trigger,role:"button",onMouseenter:e.onMouseEnter,onTouchstart:e.onTouchStart},{default:M.withCtx((l,n,r,u)=>{if(!n)return[M.renderSlot(e.$slots,"default",{open:t,close:o},()=>[M.createVNode("button",{disabled:e.disabled}," Open ",8,["disabled"])])];G(e.$slots,"default",{open:t,close:o},()=>{n(`<button${W(e.disabled)?" disabled":""}${u}> Open </button>`)},n,r,u)}),_:2},n,r)),e.overlay?(l("<template>"),l(t?`<div class="${K([e.ui.overlay.base,e.ui.overlay.background])}"${r}></div>`:"\x3c!----\x3e"),l("</template>")):l("\x3c!----\x3e"),t?(l(`<div class="${K([e.ui.container,e.ui.width])}" style="${q(e.containerStyle)}"${r}><template><div${r}>`),e.popper.arrow?l(`<div data-popper-arrow class="${K(Object.values(e.ui.arrow))}"${r}></div>`):l("\x3c!----\x3e"),l(L(v,{class:[e.ui.base,e.ui.background,e.ui.ring,e.ui.rounded,e.ui.shadow],static:""},{default:M.withCtx((l,n,r,u)=>{if(!n)return[M.renderSlot(e.$slots,"panel",{open:t,close:o})];G(e.$slots,"panel",{open:t,close:o},null,n,r,u)}),_:2},n,r)),l("</div></template></div>")):l("\x3c!----\x3e")}),_:3},o))}]]);export{ue as default};
//# sourceMappingURL=Popover-CCcWig8T.mjs.map
