import e from"./Checkbox-DG6S10z7.mjs";import{a as t,v as a,m as o,d as n,e as l,f as s,s as r,g as i}from"./server.mjs";import d from"./Progress-vwzpyUnW.mjs";import{O as c,x as u,F as p}from"../_/nitro.mjs";import{f as m}from"../_/index.mjs";import{q as g,t as x,k as f,v as y,z as v,y as b,j as S}from"../routes/renderer.mjs";import"./useFormGroup-C1Kwcc-G.mjs";import"../_/index2.mjs";import"../_/shared.esm-bundler.mjs";const h=o(i.ui.strategy,i.ui.table,{wrapper:"relative overflow-x-auto",base:"min-w-full table-fixed",divide:"divide-y divide-gray-300 dark:divide-gray-700",thead:"relative",tbody:"divide-y divide-gray-200 dark:divide-gray-800",caption:"sr-only",tr:{base:"",selected:"bg-gray-50 dark:bg-gray-800/50",expanded:"bg-gray-50 dark:bg-gray-800/50",active:"hover:bg-gray-50 dark:hover:bg-gray-800/50 cursor-pointer"},th:{base:"text-left rtl:text-right",padding:"px-4 py-3.5",color:"text-gray-900 dark:text-white",font:"font-semibold",size:"text-sm"},td:{base:"whitespace-nowrap",padding:"px-4 py-4",color:"text-gray-500 dark:text-gray-400",font:"",size:"text-sm"},checkbox:{padding:"ps-4"},loadingState:{wrapper:"flex flex-col items-center justify-center flex-1 px-6 py-14 sm:px-14",label:"text-sm text-center text-gray-900 dark:text-white",icon:"w-6 h-6 mx-auto text-gray-400 dark:text-gray-500 mb-4 animate-spin"},emptyState:{wrapper:"flex flex-col items-center justify-center flex-1 px-6 py-14 sm:px-14",label:"text-sm text-center text-gray-900 dark:text-white",icon:"w-6 h-6 mx-auto text-gray-400 dark:text-gray-500 mb-4"},expand:{icon:"transform transition-transform duration-200"},progress:{wrapper:"absolute inset-x-0 -bottom-[0.5px] p-0"},default:{sortAscIcon:"i-heroicons-bars-arrow-up-20-solid",sortDescIcon:"i-heroicons-bars-arrow-down-20-solid",sortButton:{icon:"i-heroicons-arrows-up-down-20-solid",trailing:!0,square:!0,color:"gray",variant:"ghost",class:"-m-1.5"},expandButton:{icon:"i-heroicons-chevron-down",color:"gray",variant:"ghost",size:"xs",class:"-my-1.5 align-middle"},checkbox:{color:"primary"},progress:{color:"primary",animation:"carousel"},loadingState:{icon:"i-heroicons-arrow-path-20-solid",label:"Loading..."},emptyState:{icon:"i-heroicons-circle-stack-20-solid",label:"No items."}}});function defaultComparator(e,t){return p(e,t)}function defaultSort(e,t,a){return e===t?0:"asc"===a?e<t?-1:1:e>t?-1:1}function getStringifiedSet(e){return new Set(e.map(e=>JSON.stringify(e)))}const w=a.defineComponent({components:{UIcon:l,UButton:n,UProgress:d,UCheckbox:e},inheritAttrs:!1,props:{modelValue:{type:Array,default:null},by:{type:[String,Function],default:()=>defaultComparator},rows:{type:Array,default:()=>[]},columns:{type:Array,default:null},columnAttribute:{type:String,default:"label"},sort:{type:Object,default:()=>({})},sortMode:{type:String,default:"auto"},sortButton:{type:Object,default:()=>h.default.sortButton},sortAscIcon:{type:String,default:()=>h.default.sortAscIcon},sortDescIcon:{type:String,default:()=>h.default.sortDescIcon},expandButton:{type:Object,default:()=>h.default.expandButton},expand:{type:Object,default:()=>null},loading:{type:Boolean,default:!1},loadingState:{type:Object,default:()=>h.default.loadingState},emptyState:{type:Object,default:()=>h.default.emptyState},caption:{type:String,default:null},progress:{type:Object,default:()=>h.default.progress},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},multipleExpand:{type:Boolean,default:!0},singleSelect:{type:Boolean,default:!1}},emits:["update:modelValue","update:sort","update:expand","select:all"],setup(e,{emit:t,attrs:o}){const{ui:n,attrs:l}=s("table",a.toRef(e,"ui"),h,a.toRef(e,"class")),i=a.computed(()=>{var t;const a=null!=(t=e.columns)?t:Object.keys(e.rows[0]).map(e=>({key:e,label:c(e),sortable:!1,class:void 0,sort:defaultSort}));return a.find(e=>"select"===e.key)||!e.modelValue?a:[{key:"select",sortable:!1,class:void 0,sort:defaultSort},...a]}),d=m(e,"sort",t,{passive:!0,defaultValue:u({},e.sort,{column:null,direction:"asc"})}),p=m(e,"expand",t,{passive:!0,defaultValue:u({},e.expand,{openedRows:[],row:null})}),g={column:d.value.column,direction:null},x=a.computed(()=>{var t;if(!(null==(t=d.value)?void 0:t.column)||"manual"===e.sortMode)return e.rows;const{column:a,direction:o}=d.value;return e.rows.slice().sort((e,t)=>{var n,l;const s=r(e,a),d=r(t,a);return(null!=(l=null==(n=i.value.find(e=>e.key===a))?void 0:n.sort)?l:defaultSort)(s,d,o)})}),f=a.computed({get:()=>e.modelValue,set(e){t("update:modelValue",e)}}),y=a.computed(()=>e.rows.length),v=a.computed(()=>{const t=getStringifiedSet(f.value),a=getStringifiedSet(e.rows);return Array.from(t).filter(e=>a.has(e)).length}),b=a.computed(()=>!(!f.value||!e.rows)&&(v.value>0&&v.value<y.value)),S=a.computed(()=>v.value===y.value),w=a.computed(()=>null===e.emptyState?null:{...n.value.default.emptyState,...e.emptyState}),k=a.computed(()=>null===e.loadingState?null:{...n.value.default.loadingState,...e.loadingState});function compare(t,a){if("string"==typeof e.by){const n=(o=e.by,e=>r(e,o));return n(t)===n(a)}var o;return e.by(t,a)}function isSelected(t){return!!e.modelValue&&f.value.some(e=>compare(a.toRaw(e),a.toRaw(t)))}function isExpanded(e){var t;return!!(null==(t=p.value)?void 0:t.openedRows)&&p.value.openedRows.some(t=>compare(t,e))}return{ui:n,attrs:l,sort:d,columns:i,rows:x,selected:f,indeterminate:b,emptyState:w,loadingState:k,isAllRowChecked:S,onChangeCheckbox:function(t,o){f.value=t?e.singleSelect?[o]:[...f.value,o]:f.value.filter(e=>!compare(a.toRaw(e),a.toRaw(o)))},isSelected:isSelected,onSort:function(e){if(d.value.column===e.key){const t=e.direction&&"asc"!==e.direction?"asc":"desc";d.value.direction===t?d.value=u({},g,{column:null,direction:"asc"}):d.value={column:d.value.column,direction:"asc"===d.value.direction?"desc":"asc"}}else d.value={column:e.key,direction:e.direction||"asc"}},onSelect:function(e){const t=(void 0).getSelection();t&&t.toString().length>0||o.onSelect&&o.onSelect(e)},onContextmenu:function(e,t){o.onContextmenu&&o.onContextmenu(e,t)},onChange:function(a){a?function(){const t=[...f.value];e.rows.forEach(e=>{isSelected(e)||t.push(e)}),f.value=t}():f.value=[],t("select:all",a)},getRowData:function(e,t,a=""){return r(e,t,a)},toggleOpened:function(t){p.value={openedRows:isExpanded(t)?p.value.openedRows.filter(e=>!compare(e,t)):e.multipleExpand?[...p.value.openedRows,t]:[t],row:t}},getAriaSort:function(e){if(e.sortable)return d.value.column!==e.key?"none":"asc"===d.value.direction?"ascending":"desc"===d.value.direction?"descending":void 0},isExpanded:isExpanded}}});const k=w.setup;w.setup=(e,t)=>{const o=a.useSSRContext();return(o.modules||(o.modules=new Set)).add("node_modules/@nuxt/ui/dist/runtime/components/data/Table.vue"),k?k(e,t):void 0};const $=t(w,[["ssrRender",function(t,o,s,r,i,c,u,p){const m=e,h=n,w=d,k=l;o(`<div${g(a.mergeProps({class:t.ui.wrapper},t.attrs,r))}><table class="${x([t.ui.base,t.ui.divide])}">`),t.$slots.caption||t.caption?f(t.$slots,"caption",{},()=>{o(`<caption class="${x(t.ui.caption)}">${y(t.caption)}</caption>`)},o,s):o("\x3c!----\x3e"),o(`<thead class="${x(t.ui.thead)}"><tr class="${x(t.ui.tr.base)}">`),t.expand?o(`<th scope="col" class="${x(t.ui.tr.base)}"><span class="sr-only">Expand</span></th>`):o("\x3c!----\x3e"),o("\x3c!--[--\x3e"),v(t.columns,(e,n)=>{o(`<th scope="col" class="${x([t.ui.th.base,t.ui.th.padding,t.ui.th.color,t.ui.th.font,t.ui.th.size,"select"===e.key&&t.ui.checkbox.padding,e.class])}"${b("aria-sort",t.getAriaSort(e))}>`),!t.singleSelect&&t.modelValue&&"select"===e.key?f(t.$slots,"select-header",{indeterminate:t.indeterminate,checked:t.isAllRowChecked,change:t.onChange},()=>{o(S(m,a.mergeProps({"model-value":t.isAllRowChecked,indeterminate:t.indeterminate},{ref_for:!0},t.ui.default.checkbox,{"aria-label":"Select all",onChange:t.onChange}),null,s))},o,s):f(t.$slots,`${e.key}-header`,{column:e,sort:t.sort,onSort:t.onSort},()=>{e.sortable?o(S(h,a.mergeProps({ref_for:!0},{...t.ui.default.sortButton||{},...t.sortButton},{icon:t.sort.column&&t.sort.column===e.key?"asc"===t.sort.direction?t.sortAscIcon:t.sortDescIcon:t.sortButton.icon||t.ui.default.sortButton.icon,label:e[t.columnAttribute],onClick:a=>t.onSort(e)}),null,s)):o(`<span>${y(e[t.columnAttribute])}</span>`)},o,s),o("</th>")}),o("\x3c!--]--\x3e</tr>"),t.loading&&t.progress?(o(`<tr><td${b("colspan",0)} class="${x(t.ui.progress.wrapper)}">`),o(S(w,a.mergeProps({...t.ui.default.progress||{},...t.progress},{size:"2xs"}),null,s)),o("</td></tr>")):o("\x3c!----\x3e"),o(`</thead><tbody class="${x(t.ui.tbody)}">`),t.loadingState&&t.loading&&!t.rows.length?(o(`<tr><td${b("colspan",t.columns.length+(t.modelValue?1:0)+(t.expand?1:0))}>`),f(t.$slots,"loading-state",{},()=>{o(`<div class="${x(t.ui.loadingState.wrapper)}">`),t.loadingState.icon?o(S(k,{name:t.loadingState.icon,class:t.ui.loadingState.icon,"aria-hidden":"true"},null,s)):o("\x3c!----\x3e"),o(`<p class="${x(t.ui.loadingState.label)}">${y(t.loadingState.label)}</p></div>`)},o,s),o("</td></tr>")):t.emptyState&&!t.rows.length?(o(`<tr><td${b("colspan",t.columns.length+(t.modelValue?1:0)+(t.expand?1:0))}>`),f(t.$slots,"empty-state",{},()=>{o(`<div class="${x(t.ui.emptyState.wrapper)}">`),t.emptyState.icon?o(S(k,{name:t.emptyState.icon,class:t.ui.emptyState.icon,"aria-hidden":"true"},null,s)):o("\x3c!----\x3e"),o(`<p class="${x(t.ui.emptyState.label)}">${y(t.emptyState.label)}</p></div>`)},o,s),o("</td></tr>")):(o("\x3c!--[--\x3e"),v(t.rows,(e,n)=>{o(`\x3c!--[--\x3e<tr class="${x([t.ui.tr.base,t.isSelected(e)&&t.ui.tr.selected,t.isExpanded(e)&&t.ui.tr.expanded,t.$attrs.onSelect&&t.ui.tr.active,null==e?void 0:e.class])}">`),t.expand?(o(`<td class="${x([t.ui.td.base,t.ui.td.padding,t.ui.td.color,t.ui.td.font,t.ui.td.size])}">`),t.$slots["expand-action"]?f(t.$slots,"expand-action",{row:e,isExpanded:t.isExpanded(e),toggle:()=>t.toggleOpened(e)},null,o,s):o(S(h,a.mergeProps({disabled:e.disabledExpand},{ref_for:!0},{...t.ui.default.expandButton||{},...t.expandButton},{ui:{icon:{base:[t.ui.expand.icon,t.isExpanded(e)&&"rotate-180"].join(" ")}},onClick:a=>t.toggleOpened(e)}),null,s)),o("</td>")):o("\x3c!----\x3e"),o("\x3c!--[--\x3e"),v(t.columns,(l,r)=>{var i;o(`<td class="${x([t.ui.td.base,t.ui.td.padding,t.ui.td.color,t.ui.td.font,t.ui.td.size,null==l?void 0:l.rowClass,null==(i=e[l.key])?void 0:i.class,"select"===l.key&&t.ui.checkbox.padding])}">`),t.modelValue&&"select"===l.key?(o("<span>"),f(t.$slots,"select-data",{checked:t.isSelected(e),change:a=>t.onChangeCheckbox(a,e)},()=>{o(S(m,a.mergeProps({"model-value":t.isSelected(e)},{ref_for:!0},t.ui.default.checkbox,{"aria-label":"Select row",onChange:a=>t.onChangeCheckbox(a,e)}),null,s))},o,s),o("</span>")):f(t.$slots,`${l.key}-data`,{column:l,row:e,index:n,getRowData:a=>t.getRowData(e,l.key,a)},()=>{o(`${y(t.getRowData(e,l.key))}`)},o,s),o("</td>")}),o("\x3c!--]--\x3e</tr>"),t.isExpanded(e)?(o('<tr><td colspan="100%">'),f(t.$slots,"expand",{row:e,index:n},null,o,s),o("</td></tr>")):o("\x3c!----\x3e"),o("\x3c!--]--\x3e")}),o("\x3c!--]--\x3e")),o("</tbody></table></div>")}]]);export{$ as default};
//# sourceMappingURL=Table-JWvBPh83.mjs.map
