import{a as e,v as a,e as n,m as t,f as o,p as i,t as l,i as u,g as s,s as r,q as c,w as d}from"./server.mjs";import{_ as p}from"./Avatar-D7j6ya_B.mjs";import{i as m,r as g,u as v,n as y,l as b}from"./combobox-DA5SnpWu.mjs";import{s as f}from"./keyboard-CAJ_aYVR.mjs";import{d as M}from"../_/index.mjs";import{x as k,F as h}from"../_/nitro.mjs";import{u as C}from"./usePopper-CpxAqeoY.mjs";import{u as I}from"./useFormGroup-C1Kwcc-G.mjs";import{j as B,t as x,k as N,z as $,v as V,A as S}from"../routes/renderer.mjs";import{u as q}from"../_/index2.mjs";import"../_/shared.esm-bundler.mjs";import"./form-D2zNWe3d.mjs";import"./active-element-history-Cer4cSOw.mjs";import"./micro-task-B6uncIso.mjs";import"./use-outside-click-C5-WFuny.mjs";import"./focus-management-pwSlEFwO.mjs";import"./use-resolve-button-type-mmKhQN3O.mjs";import"./calculate-active-index-8KfbvCxF.mjs";import"./hidden-C_dNCCVv.mjs";import"./open-closed-yxKiGq4R.mjs";const j=t(s.ui.strategy,s.ui.input,c),w=t(s.ui.strategy,s.ui.inputMenu,d),A=a.defineComponent({components:{HCombobox:b,HComboboxButton:y,HComboboxOptions:v,HComboboxOption:g,HComboboxInput:m,UIcon:n,UAvatar:p},inheritAttrs:!1,props:{modelValue:{type:[String,Number,Object,Array],default:""},query:{type:String,default:null},by:{type:String,default:void 0},options:{type:Array,default:()=>[]},id:{type:String,default:null},name:{type:String,default:null},required:{type:Boolean,default:!1},icon:{type:String,default:null},loadingIcon:{type:String,default:()=>j.default.loadingIcon},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:()=>w.default.trailingIcon},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},selectedIcon:{type:String,default:()=>w.default.selectedIcon},disabled:{type:Boolean,default:!1},nullable:{type:Boolean,default:!1},placeholder:{type:String,default:null},padded:{type:Boolean,default:!0},size:{type:String,default:null,validator:e=>Object.keys(j.size).includes(e)},color:{type:String,default:()=>j.default.color,validator:e=>[...s.ui.colors,...Object.keys(j.color)].includes(e)},variant:{type:String,default:()=>j.default.variant,validator:e=>[...Object.keys(j.variant),...Object.values(j.color).flatMap(e=>Object.keys(e))].includes(e)},optionAttribute:{type:String,default:"label"},valueAttribute:{type:String,default:null},search:{type:Function,default:void 0},searchAttributes:{type:Array,default:null},searchLazy:{type:Boolean,default:!1},debounce:{type:Number,default:200},popper:{type:Object,default:()=>({})},inputClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},uiMenu:{type:Object,default:()=>({})}},emits:["update:modelValue","update:query","open","close","change"],setup(e,{emit:n,slots:t}){const{ui:c,attrs:d}=o("input",a.toRef(e,"ui"),j,a.toRef(e,"class")),{ui:p}=o("inputMenu",a.toRef(e,"uiMenu"),w),m=a.computed(()=>k({},e.popper,p.value.popper)),[g,v]=C(m.value),{size:y,rounded:b}=i({ui:c,props:e}),{emitFormBlur:B,emitFormChange:x,inputId:N,color:$,size:V,name:S}=I(e,j),A=a.computed(()=>{var e;return null!=(e=y.value)?e:V.value}),O=a.computed(()=>{if(!e.by)return;if("function"==typeof e.by)return e.by;const a=e.by;return a.indexOf(".")>0?(e,n)=>accessor(e,a)===accessor(n,a):a}),z=a.ref(""),_=a.computed({get(){var a;return null!=(a=e.query)?a:z.value},set(e){z.value=e,n("update:query",e)}});function isObject(e){return!Array.isArray(e)&&null!==e&&"object"==typeof e}const R=a.computed(()=>{if(!e.modelValue)return null;if(e.valueAttribute){const a=Q.value.find(a=>{const n=(t=a,e.valueAttribute?accessor(t,e.valueAttribute):t);var t,o,i;return o=n,i=e.modelValue,O.value&&"function"!=typeof O.value&&isObject(o)&&isObject(i)?h(o[e.by],i[e.by]):h(o,i)});return a?accessor(a,e.optionAttribute):null}return["string","number"].includes(typeof e.modelValue)?e.modelValue:accessor(e.modelValue,e.optionAttribute)}),D=a.computed(()=>{var a,n;const o=(null==(n=null==(a=c.value.color)?void 0:a[$.value])?void 0:n[e.variant])||c.value.variant[e.variant];return l(u(c.value.base,c.value.form,b.value,c.value.placeholder,c.value.size[A.value],e.padded?c.value.padding[A.value]:"p-0",null==o?void 0:o.replaceAll("{color}",$.value),(F.value||t.leading)&&c.value.leading.padding[A.value],(H.value||t.trailing)&&c.value.trailing.padding[A.value]),e.inputClass)}),F=a.computed(()=>e.icon&&e.leading||e.icon&&!e.trailing||e.loading&&!e.trailing||e.leadingIcon),H=a.computed(()=>e.icon&&e.trailing||e.loading&&e.trailing||e.trailingIcon),P=a.computed(()=>e.loading?e.loadingIcon:e.leadingIcon||e.icon),W=a.computed(()=>e.loading&&!F.value?e.loadingIcon:e.trailingIcon||e.icon),T=a.computed(()=>u(c.value.icon.leading.wrapper,c.value.icon.leading.pointer,c.value.icon.leading.padding[A.value])),L=a.computed(()=>u(c.value.icon.base,$.value&&s.ui.colors.includes($.value)&&c.value.icon.color.replaceAll("{color}",$.value),c.value.icon.size[A.value],e.loading&&c.value.icon.loading)),E=a.computed(()=>u(c.value.icon.trailing.wrapper,c.value.icon.trailing.padding[A.value])),U=a.computed(()=>u(c.value.icon.base,$.value&&s.ui.colors.includes($.value)&&c.value.icon.color.replaceAll("{color}",$.value),c.value.icon.size[A.value],e.loading&&!F.value&&c.value.icon.loading)),K=e.search&&"function"==typeof e.search?q(e.search,e.debounce):void 0,Q=M(async()=>K?await K(_.value):e.options||[],[],{lazy:e.searchLazy});const G=a.computed(()=>{if(!_.value||K)return Q.value;const a=_.value.replace(/[.*+?^${}()|[\]\\]/g,e=>`\\${e}`);return Q.value.filter(n=>{var t;return((null==(t=e.searchAttributes)?void 0:t.length)?e.searchAttributes:[e.optionAttribute]).some(e=>{if(["string","number"].includes(typeof n))return-1!==String(n).search(new RegExp(a,"i"));const t=r(n,e);return null!=t&&-1!==String(t).search(new RegExp(a,"i"))})})});function accessor(e,a){return r(e,a)}return a.watch(v,e=>{e?n("open"):(n("close"),B())}),f(()=>a.useId()),{ui:c,uiMenu:p,attrs:d,name:S,inputId:N,popper:m,trigger:g,container:v,label:R,isLeading:F,isTrailing:H,inputClass:D,leadingIconName:P,leadingIconClass:L,leadingWrapperIconClass:T,trailingIconName:W,trailingIconClass:U,trailingWrapperIconClass:E,filteredOptions:G,query:_,accessor:accessor,onUpdate:function(t){_.value="",a.toRaw(e.modelValue)!==a.toRaw(t)&&(n("update:modelValue",t),n("change",t),x())},onQueryChange:function(e){_.value=e.target.value},by:O}}});const O=A.setup;A.setup=(e,n)=>{const t=a.useSSRContext();return(t.modules||(t.modules=new Set)).add("node_modules/@nuxt/ui/dist/runtime/components/forms/InputMenu.vue"),O?O(e,n):void 0};const z=e(A,[["ssrRender",function(e,t,o,i,l,u,s,r){const c=a.resolveComponent("HCombobox"),d=a.resolveComponent("HComboboxInput"),m=n,g=a.resolveComponent("HComboboxButton"),v=a.resolveComponent("HComboboxOptions"),y=a.resolveComponent("HComboboxOption"),b=p;t(B(c,a.mergeProps({by:e.by,name:e.name,"model-value":e.modelValue,disabled:e.disabled,nullable:e.nullable,as:"div",class:e.ui.wrapper,"onUpdate:modelValue":e.onUpdate},i),{default:a.withCtx(({open:n},t,o,i)=>{if(!t)return[a.createVNode("div",{class:e.uiMenu.trigger},[a.createVNode(d,a.mergeProps({id:e.inputId,name:e.name,required:e.required,placeholder:e.placeholder,disabled:e.disabled,class:e.inputClass,autocomplete:"off"},e.attrs,{"display-value":()=>e.query?e.query:e.label,onChange:e.onQueryChange}),null,16,["id","name","required","placeholder","disabled","class","display-value","onChange"]),e.isLeading&&e.leadingIconName||e.$slots.leading?(a.openBlock(),a.createBlock("span",{key:0,class:e.leadingWrapperIconClass},[a.renderSlot(e.$slots,"leading",{disabled:e.disabled,loading:e.loading},()=>[a.createVNode(m,{name:e.leadingIconName,class:e.leadingIconClass},null,8,["name","class"])])],2)):a.createCommentVNode("",!0),e.isTrailing&&e.trailingIconName||e.$slots.trailing?(a.openBlock(),a.createBlock(g,{key:1,ref:"trigger",class:e.trailingWrapperIconClass},{default:a.withCtx(()=>[a.renderSlot(e.$slots,"trailing",{disabled:e.disabled,loading:e.loading},()=>[a.createVNode(m,{name:e.trailingIconName,class:e.trailingIconClass},null,8,["name","class"])])]),_:3},8,["class"])):a.createCommentVNode("",!0)],2),n?(a.openBlock(),a.createBlock("div",{key:0,ref:"container",class:[e.uiMenu.container,e.uiMenu.width]},[a.createVNode(a.Transition,a.mergeProps({appear:""},e.uiMenu.transition),{default:a.withCtx(()=>[a.createVNode("div",null,[e.popper.arrow?(a.openBlock(),a.createBlock("div",{key:0,"data-popper-arrow":"",class:Object.values(e.uiMenu.arrow)},null,2)):a.createCommentVNode("",!0),a.createVNode(v,{static:"",class:[e.uiMenu.base,e.uiMenu.ring,e.uiMenu.rounded,e.uiMenu.shadow,e.uiMenu.background,e.uiMenu.padding,e.uiMenu.height]},{default:a.withCtx(()=>[(a.openBlock(!0),a.createBlock(a.Fragment,null,a.renderList(e.filteredOptions,(n,t)=>(a.openBlock(),a.createBlock(y,{key:t,as:"template",value:e.valueAttribute?e.accessor(n,e.valueAttribute):n,disabled:n.disabled},{default:a.withCtx(({active:t,selected:o,disabled:i})=>[a.createVNode("li",{class:[e.uiMenu.option.base,e.uiMenu.option.rounded,e.uiMenu.option.padding,e.uiMenu.option.size,e.uiMenu.option.color,t?e.uiMenu.option.active:e.uiMenu.option.inactive,o&&e.uiMenu.option.selected,i&&e.uiMenu.option.disabled]},[a.createVNode("div",{class:e.uiMenu.option.container},[a.renderSlot(e.$slots,"option",{option:n,active:t,selected:o},()=>[n.icon?(a.openBlock(),a.createBlock(m,{key:0,name:n.icon,class:[e.uiMenu.option.icon.base,t?e.uiMenu.option.icon.active:e.uiMenu.option.icon.inactive,n.iconClass],"aria-hidden":"true"},null,8,["name","class"])):n.avatar?(a.openBlock(),a.createBlock(b,a.mergeProps({key:1,ref_for:!0},{size:e.uiMenu.option.avatar.size,...n.avatar},{class:e.uiMenu.option.avatar.base,"aria-hidden":"true"}),null,16,["class"])):n.chip?(a.openBlock(),a.createBlock("span",{key:2,class:e.uiMenu.option.chip.base,style:{background:`#${n.chip}`}},null,6)):a.createCommentVNode("",!0),a.createVNode("span",{class:"truncate"},a.toDisplayString(["string","number"].includes(typeof n)?n:e.accessor(n,e.optionAttribute)),1)])],2),o?(a.openBlock(),a.createBlock("span",{key:0,class:[e.uiMenu.option.selectedIcon.wrapper,e.uiMenu.option.selectedIcon.padding]},[a.createVNode(m,{name:e.selectedIcon,class:e.uiMenu.option.selectedIcon.base,"aria-hidden":"true"},null,8,["name","class"])],2)):a.createCommentVNode("",!0)],2)]),_:2},1032,["value","disabled"]))),128)),e.query&&!e.filteredOptions.length?(a.openBlock(),a.createBlock("p",{key:0,class:e.uiMenu.option.empty},[a.renderSlot(e.$slots,"option-empty",{query:e.query},()=>[a.createTextVNode(a.toDisplayString(e.uiMenu.default.optionEmpty.label.replace("{query}",e.query)),1)])],2)):e.filteredOptions.length?a.createCommentVNode("",!0):(a.openBlock(),a.createBlock("p",{key:1,class:e.uiMenu.empty},[a.renderSlot(e.$slots,"empty",{query:e.query},()=>[a.createTextVNode(a.toDisplayString(e.uiMenu.default.empty.label),1)])],2))]),_:3},8,["class"])])]),_:3},16)],2)):a.createCommentVNode("",!0)];t(`<div class="${x(e.uiMenu.trigger)}"${i}>`),t(B(d,a.mergeProps({id:e.inputId,name:e.name,required:e.required,placeholder:e.placeholder,disabled:e.disabled,class:e.inputClass,autocomplete:"off"},e.attrs,{"display-value":()=>e.query?e.query:e.label,onChange:e.onQueryChange}),null,o,i)),e.isLeading&&e.leadingIconName||e.$slots.leading?(t(`<span class="${x(e.leadingWrapperIconClass)}"${i}>`),N(e.$slots,"leading",{disabled:e.disabled,loading:e.loading},()=>{t(B(m,{name:e.leadingIconName,class:e.leadingIconClass},null,o,i))},t,o,i),t("</span>")):t("\x3c!----\x3e"),e.isTrailing&&e.trailingIconName||e.$slots.trailing?t(B(g,{ref:"trigger",class:e.trailingWrapperIconClass},{default:a.withCtx((n,t,o,i)=>{if(!t)return[a.renderSlot(e.$slots,"trailing",{disabled:e.disabled,loading:e.loading},()=>[a.createVNode(m,{name:e.trailingIconName,class:e.trailingIconClass},null,8,["name","class"])])];N(e.$slots,"trailing",{disabled:e.disabled,loading:e.loading},()=>{t(B(m,{name:e.trailingIconName,class:e.trailingIconClass},null,o,i))},t,o,i)}),_:2},o,i)):t("\x3c!----\x3e"),t("</div>"),n?(t(`<div class="${x([e.uiMenu.container,e.uiMenu.width])}"${i}><template><div${i}>`),e.popper.arrow?t(`<div data-popper-arrow class="${x(Object.values(e.uiMenu.arrow))}"${i}></div>`):t("\x3c!----\x3e"),t(B(v,{static:"",class:[e.uiMenu.base,e.uiMenu.ring,e.uiMenu.rounded,e.uiMenu.shadow,e.uiMenu.background,e.uiMenu.padding,e.uiMenu.height]},{default:a.withCtx((n,t,o,i)=>{if(!t)return[(a.openBlock(!0),a.createBlock(a.Fragment,null,a.renderList(e.filteredOptions,(n,t)=>(a.openBlock(),a.createBlock(y,{key:t,as:"template",value:e.valueAttribute?e.accessor(n,e.valueAttribute):n,disabled:n.disabled},{default:a.withCtx(({active:t,selected:o,disabled:i})=>[a.createVNode("li",{class:[e.uiMenu.option.base,e.uiMenu.option.rounded,e.uiMenu.option.padding,e.uiMenu.option.size,e.uiMenu.option.color,t?e.uiMenu.option.active:e.uiMenu.option.inactive,o&&e.uiMenu.option.selected,i&&e.uiMenu.option.disabled]},[a.createVNode("div",{class:e.uiMenu.option.container},[a.renderSlot(e.$slots,"option",{option:n,active:t,selected:o},()=>[n.icon?(a.openBlock(),a.createBlock(m,{key:0,name:n.icon,class:[e.uiMenu.option.icon.base,t?e.uiMenu.option.icon.active:e.uiMenu.option.icon.inactive,n.iconClass],"aria-hidden":"true"},null,8,["name","class"])):n.avatar?(a.openBlock(),a.createBlock(b,a.mergeProps({key:1,ref_for:!0},{size:e.uiMenu.option.avatar.size,...n.avatar},{class:e.uiMenu.option.avatar.base,"aria-hidden":"true"}),null,16,["class"])):n.chip?(a.openBlock(),a.createBlock("span",{key:2,class:e.uiMenu.option.chip.base,style:{background:`#${n.chip}`}},null,6)):a.createCommentVNode("",!0),a.createVNode("span",{class:"truncate"},a.toDisplayString(["string","number"].includes(typeof n)?n:e.accessor(n,e.optionAttribute)),1)])],2),o?(a.openBlock(),a.createBlock("span",{key:0,class:[e.uiMenu.option.selectedIcon.wrapper,e.uiMenu.option.selectedIcon.padding]},[a.createVNode(m,{name:e.selectedIcon,class:e.uiMenu.option.selectedIcon.base,"aria-hidden":"true"},null,8,["name","class"])],2)):a.createCommentVNode("",!0)],2)]),_:2},1032,["value","disabled"]))),128)),e.query&&!e.filteredOptions.length?(a.openBlock(),a.createBlock("p",{key:0,class:e.uiMenu.option.empty},[a.renderSlot(e.$slots,"option-empty",{query:e.query},()=>[a.createTextVNode(a.toDisplayString(e.uiMenu.default.optionEmpty.label.replace("{query}",e.query)),1)])],2)):e.filteredOptions.length?a.createCommentVNode("",!0):(a.openBlock(),a.createBlock("p",{key:1,class:e.uiMenu.empty},[a.renderSlot(e.$slots,"empty",{query:e.query},()=>[a.createTextVNode(a.toDisplayString(e.uiMenu.default.empty.label),1)])],2))];t("\x3c!--[--\x3e"),$(e.filteredOptions,(n,l)=>{t(B(y,{key:l,as:"template",value:e.valueAttribute?e.accessor(n,e.valueAttribute):n,disabled:n.disabled},{default:a.withCtx(({active:t,selected:o,disabled:i},l,u,s)=>{if(!l)return[a.createVNode("li",{class:[e.uiMenu.option.base,e.uiMenu.option.rounded,e.uiMenu.option.padding,e.uiMenu.option.size,e.uiMenu.option.color,t?e.uiMenu.option.active:e.uiMenu.option.inactive,o&&e.uiMenu.option.selected,i&&e.uiMenu.option.disabled]},[a.createVNode("div",{class:e.uiMenu.option.container},[a.renderSlot(e.$slots,"option",{option:n,active:t,selected:o},()=>[n.icon?(a.openBlock(),a.createBlock(m,{key:0,name:n.icon,class:[e.uiMenu.option.icon.base,t?e.uiMenu.option.icon.active:e.uiMenu.option.icon.inactive,n.iconClass],"aria-hidden":"true"},null,8,["name","class"])):n.avatar?(a.openBlock(),a.createBlock(b,a.mergeProps({key:1,ref_for:!0},{size:e.uiMenu.option.avatar.size,...n.avatar},{class:e.uiMenu.option.avatar.base,"aria-hidden":"true"}),null,16,["class"])):n.chip?(a.openBlock(),a.createBlock("span",{key:2,class:e.uiMenu.option.chip.base,style:{background:`#${n.chip}`}},null,6)):a.createCommentVNode("",!0),a.createVNode("span",{class:"truncate"},a.toDisplayString(["string","number"].includes(typeof n)?n:e.accessor(n,e.optionAttribute)),1)])],2),o?(a.openBlock(),a.createBlock("span",{key:0,class:[e.uiMenu.option.selectedIcon.wrapper,e.uiMenu.option.selectedIcon.padding]},[a.createVNode(m,{name:e.selectedIcon,class:e.uiMenu.option.selectedIcon.base,"aria-hidden":"true"},null,8,["name","class"])],2)):a.createCommentVNode("",!0)],2)];l(`<li class="${x([e.uiMenu.option.base,e.uiMenu.option.rounded,e.uiMenu.option.padding,e.uiMenu.option.size,e.uiMenu.option.color,t?e.uiMenu.option.active:e.uiMenu.option.inactive,o&&e.uiMenu.option.selected,i&&e.uiMenu.option.disabled])}"${s}><div class="${x(e.uiMenu.option.container)}"${s}>`),N(e.$slots,"option",{option:n,active:t,selected:o},()=>{n.icon?l(B(m,{name:n.icon,class:[e.uiMenu.option.icon.base,t?e.uiMenu.option.icon.active:e.uiMenu.option.icon.inactive,n.iconClass],"aria-hidden":"true"},null,u,s)):n.avatar?l(B(b,a.mergeProps({ref_for:!0},{size:e.uiMenu.option.avatar.size,...n.avatar},{class:e.uiMenu.option.avatar.base,"aria-hidden":"true"}),null,u,s)):n.chip?l(`<span class="${x(e.uiMenu.option.chip.base)}" style="${S({background:`#${n.chip}`})}"${s}></span>`):l("\x3c!----\x3e"),l(`<span class="truncate"${s}>${V(["string","number"].includes(typeof n)?n:e.accessor(n,e.optionAttribute))}</span>`)},l,u,s),l("</div>"),o?(l(`<span class="${x([e.uiMenu.option.selectedIcon.wrapper,e.uiMenu.option.selectedIcon.padding])}"${s}>`),l(B(m,{name:e.selectedIcon,class:e.uiMenu.option.selectedIcon.base,"aria-hidden":"true"},null,u,s)),l("</span>")):l("\x3c!----\x3e"),l("</li>")}),_:2},o,i))}),t("\x3c!--]--\x3e"),e.query&&!e.filteredOptions.length?(t(`<p class="${x(e.uiMenu.option.empty)}"${i}>`),N(e.$slots,"option-empty",{query:e.query},()=>{t(`${V(e.uiMenu.default.optionEmpty.label.replace("{query}",e.query))}`)},t,o,i),t("</p>")):e.filteredOptions.length?t("\x3c!----\x3e"):(t(`<p class="${x(e.uiMenu.empty)}"${i}>`),N(e.$slots,"empty",{query:e.query},()=>{t(`${V(e.uiMenu.default.empty.label)}`)},t,o,i),t("</p>"))}),_:2},o,i)),t("</div></template></div>")):t("\x3c!----\x3e")}),_:3},o))}]]);export{z as default};
//# sourceMappingURL=InputMenu-VdDlcu1r.mjs.map
